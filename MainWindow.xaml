<mah:MetroWindow
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BodDetect"
        xmlns:Metro="https://github.com/1217950746/Arthas-WPFUI"
        xmlns:UIConvert ="clr-namespace:BodDetect.UIConvert"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        x:Class="BodDetect.MainWindow"
        Loaded="Window_Loaded" 
        mc:Ignorable="d"
        Width="1366" MaxWidth="1366" MinWidth="1366"
        Height="768" MaxHeight="768" MinHeight="768"
    
        Closed="MetroWindow_Closed" Background="#FF954619"

        WindowState="Maximized"
        ResizeMode="NoResize" KeepBorderOnMaximize="False" 
        
        >
    <!--ResizeMode="NoResize" ShowInTaskbar="False"  IsCloseButtonEnabled="True" IsMaxRestoreButtonEnabled="True" IsMinButtonEnabled="True" KeepBorderOnMaximize="False" IsManipulationEnabled="True" ShowCloseButton="True" ShowDialogsOverTitleBar="False" ShowMaxRestoreButton="False" ShowMinButton="True" ShowSystemMenu="False" ShowSystemMenuOnRightClick="False" ShowTitleBar="False" >-->

    <Window.Resources>

        <UIConvert:BodDataToString x:Key="BodDataToString"/>
        <UIConvert:HisParamDataToString x:Key="HisParamDataToString"/>
        <UIConvert:StringToImageSourceConverter x:Key="MyImageConverter"/>
        <UIConvert:AlarmDataToString x:Key="AlarmDataConverter"/>


        <!--日历主体样式表   Metro:MetroWindow-->
        <Style x:Key="CalendarItemStyle1"
                TargetType="{x:Type CalendarItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CalendarItem}">
                        <ControlTemplate.Resources>
                            <DataTemplate x:Key="{x:Static CalendarItem.DayTitleTemplateResourceKey}">
                                <!--日历星期几的绑定样式,我格式化成周一,周二等-->
                                <TextBlock Foreground="#666666"
                                            FontSize="14"
                                            FontFamily="微软雅黑"
                                            HorizontalAlignment="Center"
                                            Margin="0 15"
                                            Text="{Binding StringFormat=周{0} }"
                                            VerticalAlignment="Center" />
                            </DataTemplate>
                        </ControlTemplate.Resources>
                        <Grid x:Name="PART_Root">
                            <Grid.Resources>
                                <!--设置日历控件 IsEnable=false 时的不可用遮罩层颜色,并且会播放过渡动画-->
                                <SolidColorBrush x:Key="DisabledColor"
                                                  Color="#A5FFFFFF" />
                            </Grid.Resources>


                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />
                                    <VisualState x:Name="Disabled">
                                        <!--设置日历控件 IsEnable=false 时遮罩层透明度0-1变色动画-->
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To="1"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="PART_DisabledVisual" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>

                            <Border BorderBrush="#cfcfcf"
                                     BorderThickness="0"
                                     Background="{TemplateBinding Background}"
                                     CornerRadius="2">
                                <Border>
                                    <Grid>
                                        <Grid.Resources>
                                            <!--日历头左箭头按钮样式模版-->
                                            <ControlTemplate x:Key="PreviousButtonTemplate"
                                                              TargetType="{x:Type Button}">
                                                <!--鼠标悬停在左箭头按钮上时改变鼠标指针样式-->
                                                <Grid Cursor="Hand">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal" />
                                                            <VisualState x:Name="MouseOver">
                                                                <!--鼠标悬停在左箭头按钮上时左箭头颜色变化动画-->
                                                                <Storyboard>
                                                                    <ColorAnimation Duration="0"
                                                                                     To="#FF73A9D8"
                                                                                     Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                                                     Storyboard.TargetName="path" />
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Disabled">
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0"
                                                                                      To=".5"
                                                                                      Storyboard.TargetProperty="(Shape.Fill).(Brush.Opacity)"
                                                                                      Storyboard.TargetName="path" />
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <!--左箭头整个区域矩形块-->
                                                    <Rectangle Fill="#363636"
                                                                Opacity="1"
                                                                Stretch="Fill" />
                                                    <Grid>
                                                        <!--左箭头-->
                                                        <Path x:Name="path"
                                                               Data="M288.75,232.25 L288.75,240.625 L283,236.625 z"
                                                               Fill="#e0e0e0"
                                                               HorizontalAlignment="Left"
                                                               Height="15"
                                                               Width="15"
                                                               Margin="20,0,0,0"
                                                               Stretch="Fill"
                                                               VerticalAlignment="Center" />
                                                    </Grid>
                                                </Grid>
                                            </ControlTemplate>
                                            <!--日历头右箭头按钮样式模版,这块跟左箭头样式模版没什么区别-->
                                            <ControlTemplate x:Key="NextButtonTemplate"
                                                              TargetType="{x:Type Button}">
                                                <Grid Cursor="Hand">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal" />
                                                            <VisualState x:Name="MouseOver">
                                                                <Storyboard>
                                                                    <ColorAnimation Duration="0"
                                                                                     To="#FF73A9D8"
                                                                                     Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                                                     Storyboard.TargetName="path" />
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Disabled">
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0"
                                                                                      To=".5"
                                                                                      Storyboard.TargetProperty="(Shape.Fill).(Brush.Opacity)"
                                                                                      Storyboard.TargetName="path" />
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <Rectangle Fill="#363636"
                                                                Opacity="1"
                                                                Stretch="Fill" />
                                                    <Grid>
                                                        <Path x:Name="path"
                                                               Data="M282.875,231.875 L282.875,240.375 L288.625,236 z"
                                                               Fill="#e0e0e0"
                                                               HorizontalAlignment="Right"
                                                               Height="15"
                                                               Width="15"
                                                               Margin="0,0,20,0"
                                                               Stretch="Fill"
                                                               VerticalAlignment="Center" />
                                                    </Grid>
                                                </Grid>
                                            </ControlTemplate>
                                            <!--日历头中间年按钮样式模版-->
                                            <ControlTemplate x:Key="HeaderButtonTemplate"
                                                              TargetType="{x:Type Button}">
                                                <Grid Cursor="Hand">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal" />
                                                            <VisualState x:Name="MouseOver">
                                                                <Storyboard>
                                                                    <ColorAnimation Duration="0"
                                                                                     To="#FF73A9D8"
                                                                                     Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)"
                                                                                     Storyboard.TargetName="buttonContent" />
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Disabled">
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0"
                                                                                      To=".5"
                                                                                      Storyboard.TargetProperty="Opacity"
                                                                                      Storyboard.TargetName="buttonContent" />
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <ContentPresenter x:Name="buttonContent"
                                                                       ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                       Content="{TemplateBinding Content}"
                                                                       TextElement.Foreground="#e0e0e0"
                                                                       HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                       Margin="1,4,1,9"
                                                                       VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                                </Grid>
                                            </ControlTemplate>
                                        </Grid.Resources>

                                        <Grid.RowDefinitions>
                                            <!--日历头,左箭头,年,右箭头-->
                                            <RowDefinition Height="Auto" />
                                            <!--日历内容,星期几和具体的日期几号几号-->
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <!--左箭头-->
                                            <ColumnDefinition Width="Auto" />
                                            <!--年-->
                                            <ColumnDefinition Width="*" />
                                            <!--右箭头-->
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <!--头,左箭头,年,右箭头,整体的背景色-->
                                        <Border Grid.Row="0"
                                                 Grid.ColumnSpan="3"
                                                 Background="#363636"></Border>
                                        <!--左箭头-->
                                        <Button x:Name="PART_PreviousButton"
                                                 Grid.Column="0"
                                                 Focusable="False"
                                                 HorizontalAlignment="Left"
                                                 Grid.Row="0"
                                                 Template="{StaticResource PreviousButtonTemplate}" />
                                        <!--年-->
                                        <Button x:Name="PART_HeaderButton"
                                                 Grid.Column="1"
                                                 FontFamily="微软雅黑"
                                                 Focusable="False"
                                                 FontSize="20"
                                                 HorizontalAlignment="Center"
                                                 Grid.Row="0"
                                                 Template="{StaticResource HeaderButtonTemplate}"
                                                 VerticalAlignment="Center" />
                                        <!--右箭头-->
                                        <Button x:Name="PART_NextButton"
                                                 Grid.Column="2"
                                                 Focusable="False"
                                                 HorizontalAlignment="Right"
                                                 Grid.Row="0"
                                                 Template="{StaticResource NextButtonTemplate}" />
                                        <!--日期几号几号内容显示-->
                                        <Border Grid.Row="1"
                                                 Grid.ColumnSpan="3"
                                                 Margin="0"
                                                 BorderBrush="#cfcfcf"
                                                 BorderThickness="3,0,3,3">
                                            <Grid x:Name="PART_MonthView"
                                                   HorizontalAlignment="Center"
                                                   Visibility="Visible">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                            </Grid>
                                        </Border>

                                        <!--月和年内容显示-->
                                        <Grid x:Name="PART_YearView"
                                               Grid.ColumnSpan="3"
                                               HorizontalAlignment="Center"
                                               Margin="6,-3,7,6"
                                               Grid.Row="1"
                                               Visibility="Hidden"
                                               VerticalAlignment="Center">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </Border>
                            <!--日历不可用的遮罩层-->
                            <Rectangle x:Name="PART_DisabledVisual"
                                        Fill="{StaticResource DisabledColor}"
                                        Opacity="0"
                                        RadiusY="2"
                                        RadiusX="2"
                                        Stretch="Fill"
                                        Stroke="{StaticResource DisabledColor}"
                                        StrokeThickness="1"
                                        Visibility="Collapsed" />
                        </Grid>
                        <!--触发器属性-->
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled"
                                      Value="False">
                                <Setter Property="Visibility"
                                         TargetName="PART_DisabledVisual"
                                         Value="Visible" />
                            </Trigger>
                            <DataTrigger Binding="{Binding DisplayMode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Calendar}}}"
                                          Value="Year">
                                <Setter Property="Visibility"
                                         TargetName="PART_MonthView"
                                         Value="Hidden" />
                                <Setter Property="Visibility"
                                         TargetName="PART_YearView"
                                         Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding DisplayMode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Calendar}}}"
                                          Value="Decade">
                                <Setter Property="Visibility"
                                         TargetName="PART_MonthView"
                                         Value="Hidden" />
                                <Setter Property="Visibility"
                                         TargetName="PART_YearView"
                                         Value="Visible" />
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--单个几号几号按钮的样式模版-->
        <Style x:Key="CalendarDayButtonStyle1"
                TargetType="{x:Type CalendarDayButton}">
            <Setter Property="Margin"
                     Value="1" />
            <Setter Property="MinWidth"
                     Value="5" />
            <Setter Property="MinHeight"
                     Value="5" />
            <Setter Property="FontSize"
                     Value="14" />
            <Setter Property="FontFamily"
                     Value="微软雅黑" />
            <Setter Property="HorizontalContentAlignment"
                     Value="Center" />
            <Setter Property="VerticalContentAlignment"
                     Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CalendarDayButton}">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.1" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Normal" />
                                    <!--悬停的颜色动画-->
                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To="0.5"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="HighlightBackground" />
                                        </Storyboard>
                                    </VisualState>
                                    <!--按下后动画-->
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To="0.5"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="HighlightBackground" />
                                        </Storyboard>
                                    </VisualState>
                                    <!--不可用动画-->
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To="0"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="HighlightBackground" />
                                            <DoubleAnimation Duration="0"
                                                              To=".35"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="NormalText" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Unselected" />
                                    <!--选中某日期的样式-->
                                    <VisualState x:Name="Selected">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To=".75"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="SelectedBackground" />
                                            <ColorAnimation Duration="0"
                                                             To="white"
                                                             Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)"
                                                             Storyboard.TargetName="NormalText" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="CalendarButtonFocusStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="CalendarButtonFocused">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Duration="0"
                                                                            Storyboard.TargetProperty="Visibility"
                                                                            Storyboard.TargetName="DayButtonFocusVisual">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="CalendarButtonUnfocused">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Duration="0"
                                                                            Storyboard.TargetProperty="Visibility"
                                                                            Storyboard.TargetName="DayButtonFocusVisual">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Collapsed</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ActiveStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Active" />
                                    <VisualState x:Name="Inactive">
                                        <Storyboard>
                                            <ColorAnimation Duration="0"
                                                             To="#b4b3b3"
                                                             Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)"
                                                             Storyboard.TargetName="NormalText" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DayStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="RegularDay" />
                                    <!--今天的样式-->
                                    <VisualState x:Name="Today">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To="1"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="TodayBackground" />
                                            <ColorAnimation Duration="0"
                                                             To="#666666"
                                                             Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)"
                                                             Storyboard.TargetName="NormalText" />

                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility"
                                                                            Storyboard.TargetName="imgToday">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>

                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <!--过期日期的-->
                                <VisualStateGroup x:Name="BlackoutDayStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="NormalDay" />
                                    <VisualState x:Name="BlackoutDay">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To=".2"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="Blackout" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border BorderBrush="#bbbbbb"
                                     BorderThickness="1">
                                <Border BorderBrush="white"
                                         BorderThickness="2,2,0,0"
                                         Margin="1,1,0,0"></Border>
                            </Border>

                            <Rectangle x:Name="TodayBackground"
                                        Fill="#c6c6c6"
                                        Opacity="0"
                                        RadiusY="1"
                                        RadiusX="1" />
                            <Rectangle x:Name="SelectedBackground"
                                        Fill="#6eafbf"
                                        Opacity="0"
                                        RadiusY="1"
                                        RadiusX="1" />
                            <Border BorderBrush="{TemplateBinding BorderBrush}"
                                     BorderThickness="{TemplateBinding BorderThickness}"
                                     Background="{TemplateBinding Background}" />
                            <Rectangle x:Name="HighlightBackground"
                                        Fill="#FFBADDE9"
                                        Opacity="0"
                                        RadiusY="1"
                                        RadiusX="1" />
                            <ContentPresenter x:Name="NormalText"
                                               TextElement.Foreground="#666666"
                                               HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                               VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                            <Path x:Name="Blackout"
                                   Data="M8.1772461,11.029181 L10.433105,11.029181 L11.700684,12.801641 L12.973633,11.029181 L15.191895,11.029181 L12.844727,13.999395 L15.21875,17.060919 L12.962891,17.060919 L11.673828,15.256231 L10.352539,17.060919 L8.1396484,17.060919 L10.519043,14.042364 z"
                                   Fill="#FF000000"
                                   HorizontalAlignment="Stretch"
                                   Margin="3"
                                   Opacity="0"
                                   RenderTransformOrigin="0.5,0.5"
                                   Stretch="Fill"
                                   VerticalAlignment="Stretch" />
                            <Rectangle x:Name="DayButtonFocusVisual"
                                        IsHitTestVisible="false"
                                        RadiusY="1"
                                        RadiusX="1"
                                        Stroke="#FF45D6FA"
                                        Visibility="Collapsed" />

                            <Image x:Name="imgToday"
                                    Width="30"
                                    Height="20"
                                    Source="/Resources/today.png"
                                    VerticalAlignment="Top"
                                    HorizontalAlignment="Left"
                                    Visibility="Hidden" />

                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="CalendarButtonStyle1"
                TargetType="{x:Type CalendarButton}">
            <Setter Property="Background"
                     Value="#FFBADDE9" />
            <Setter Property="MinWidth"
                     Value="80" />
            <Setter Property="MinHeight"
                     Value="80" />
            <Setter Property="Margin"
                     Value="0" />
            <Setter Property="FontSize"
                     Value="25" />
            <Setter Property="HorizontalContentAlignment"
                     Value="Center" />
            <Setter Property="VerticalContentAlignment"
                     Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CalendarButton}">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.1" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Normal" />
                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To=".5"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="Background" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To=".5"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="Background" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Unselected" />
                                    <VisualState x:Name="Selected">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                              To=".75"
                                                              Storyboard.TargetProperty="Opacity"
                                                              Storyboard.TargetName="SelectedBackground" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ActiveStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Active" />
                                    <VisualState x:Name="Inactive">
                                        <Storyboard>
                                            <ColorAnimation Duration="0"
                                                             To="#FF777777"
                                                             Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)"
                                                             Storyboard.TargetName="NormalText" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="CalendarButtonFocusStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0" />
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="CalendarButtonFocused">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Duration="0"
                                                                            Storyboard.TargetProperty="Visibility"
                                                                            Storyboard.TargetName="CalendarButtonFocusVisual">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="CalendarButtonUnfocused">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Duration="0"
                                                                            Storyboard.TargetProperty="Visibility"
                                                                            Storyboard.TargetName="CalendarButtonFocusVisual">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Collapsed</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Rectangle x:Name="SelectedBackground"
                                        Fill="{TemplateBinding Background}"
                                        Opacity="0"
                                        RadiusY="1"
                                        RadiusX="1" />
                            <Rectangle x:Name="Background"
                                        Fill="{TemplateBinding Background}"
                                        Opacity="0"
                                        RadiusY="1"
                                        RadiusX="1" />
                            <ContentPresenter x:Name="NormalText"
                                               TextElement.Foreground="#FF333333"
                                               HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                               Margin="1,0,1,1"
                                               VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                            <Rectangle x:Name="CalendarButtonFocusVisual"
                                        IsHitTestVisible="false"
                                        RadiusY="1"
                                        RadiusX="1"
                                        Stroke="#FF45D6FA"
                                        Visibility="Collapsed" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused"
                                      Value="True">
                                <Setter Property="Visibility"
                                         TargetName="CalendarButtonFocusVisual"
                                         Value="Visible" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="CalendarStyle1"
                TargetType="{x:Type Calendar}">
            <!--日历控件的背景色,也可以改成绑定的-->
            <Setter Property="Background"
                     Value="#f6f6f6" />

            <Setter Property="CalendarItemStyle" Value="{StaticResource CalendarItemStyle1}" />
            <Setter Property="CalendarButtonStyle" Value="{StaticResource CalendarButtonStyle1}" />
            <Setter Property="CalendarDayButtonStyle" Value="{StaticResource CalendarDayButtonStyle1}" />
            <Setter Property="Width"
                     Value="300" />
            <Setter Property="Height"
                     Value="300" />

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Calendar}">

                        <StackPanel x:Name="PART_Root"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center">
                            <!--这个是日历控件的主体元件,也是内部元件PART_CalendarItem名称不要更改,可以改它的其它样式属性-->
                            <CalendarItem x:Name="PART_CalendarItem"
                                           BorderBrush="{TemplateBinding BorderBrush}"
                                           BorderThickness="{TemplateBinding BorderThickness}"
                                           Background="{TemplateBinding Background}"
                                           Style="{TemplateBinding CalendarItemStyle}"
                                           Height="{TemplateBinding Height}"
                                           Width="{TemplateBinding Width}"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch" />
                        </StackPanel>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ListViewItemStyle" TargetType="{x:Type ListViewItem}">
            <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
            <Setter Property="Height" Value="35"/>
        </Style>

        <local:BoolConverter x:Key="debugModeCon"/>

        <Style TargetType="Metro:MetroTextBox">
            <EventSetter Event="GotFocus" Handler="TextBox_GotFocus">

            </EventSetter>
            <EventSetter Event="LostFocus" Handler="TextBox_LostFocus">

            </EventSetter>
        </Style>
    </Window.Resources>
    <mah:MetroWindow.WindowButtonCommands>
        <mah:WindowButtonCommands/>
    </mah:MetroWindow.WindowButtonCommands>

    <Window.DataContext>
        <local:MainWindow_Model />
    </Window.DataContext>

    <Grid >
        <Metro:MetroMenuTabControl x:Name="tab" IconMode="True"  >
            <Metro:MetroMenuTabItem Name="SysTab"  Header="系统首页" Icon="/Resources/icon/home.png" IconMove="/Resources/icon/home.png"  Height="50" TabIndex="1">
                <Grid Background="White">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="100"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Metro:MetroImage Grid.Row="0" Name="BiaotiImage" Content="BiaotiImage"  HorizontalAlignment="Center"  VerticalAlignment="Top"  Source="/Resources/biaoti.png"  Background="{x:Null}"/>
                    <Metro:MetroTabControl x:Name="tabc" Foreground="#FF2F48B8" FontSize="14" Grid.Row="1" Background="{x:Null}">
                        <Metro:MetroTabItem Header="参数3D显示" Icon="/Resources/tabIcon.png">
                            <Grid  HorizontalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200" />
                                    <ColumnDefinition Width="600" />
                                    <ColumnDefinition Width="200" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" HorizontalAlignment="Center" >
                                    <Label FontSize="36" Name="BOD" HorizontalAlignment="Center"   Content="{Binding BodData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 0}"  ></Label>
                                    <Metro:MetroImage Grid.Column="0"  Name="BODImage" Content="BODImage"  Source="/Resources/2D/BOD.png"  />
                                </StackPanel>

                                <StackPanel Grid.Column="1" HorizontalAlignment="Center" >
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="250" ></RowDefinition>
                                            <RowDefinition Height="250" ></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="200"></ColumnDefinition>
                                            <ColumnDefinition Width="200"></ColumnDefinition>
                                            <ColumnDefinition Width="200"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="DOTem" HorizontalAlignment="Center" Content="{Binding Uv254Data,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 1}" />
                                            <Metro:MetroImage Grid.Column="0"  x:Name="DOTemImage" Source="/Resources/2D/uv254.png"  >
                                            </Metro:MetroImage>
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="DO" HorizontalAlignment="Center" Content="{Binding DoData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 2}"  />
                                            <Metro:MetroImage Grid.Column="0"  Name="DOImage" Content="DOImage"  Source="/Resources/2D/DO.png"  />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="2" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="COD" HorizontalAlignment="Center" Content="{Binding CodData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 3}" />
                                            <Metro:MetroImage Grid.Column="0"  Name="CDOImage" Content="CDOImage"   Source="/Resources/COD.png"  />
                                        </StackPanel>

                                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="PHTem" HorizontalAlignment="Center"  Content="{Binding TemperatureData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 4}" ></Label>
                                            <Metro:MetroImage Grid.Column="0"  Name="PHTemImage" Content="PHTemImage"   Source="/Resources/tempu.png"  />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="PH" HorizontalAlignment="Center"   Content="{Binding PHData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 5}" ></Label>
                                            <Metro:MetroImage Grid.Column="0"  Name="PHImage" Content="PH_Image" Source="/Resources/PH.png"  />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="2" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="Turbidity" HorizontalAlignment="Center"  Content="{Binding TurbidityData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 6}" ></Label>
                                            <Metro:MetroImage Grid.Column="0"  Name="TurbidityImage" Content="TurbidityImage"  Source="/Resources/Turbidity.png"  />
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>

                                <StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Top" Orientation="Vertical" Margin="20,20,0,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="湿度:" FontSize="20" FontWeight="Black"/>
                                        <TextBlock Text="{Binding HumidityDataData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 0}" FontSize="20" FontWeight="Black" Width="100" HorizontalAlignment="Right"/>
                                        <TextBlock Text="%" FontSize="20" FontWeight="Black" Margin="5,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                        <TextBlock Text="温度:" FontSize="20" FontWeight="Black"/>
                                        <TextBlock Text="{Binding AirTemperatureData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 0}" FontSize="20" FontWeight="Black" Width="100" HorizontalAlignment="Right"/>
                                        <TextBlock Text="℃" FontSize="20" FontWeight="Black" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Metro:MetroTabItem>
                        <Metro:MetroTabItem Header="参数正面显示" Icon="/Resources/tabIcon.png">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center" >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200" />
                                    <ColumnDefinition Width="600" />
                                    <ColumnDefinition Width="200" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" HorizontalAlignment="Center" >
                                    <Label FontSize="36" Name="BOD_" HorizontalAlignment="Center"  Content="{Binding BodData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 0}" ></Label>
                                    <Metro:MetroImage Grid.Column="0"  Name="BOD_Image" Content="BOD_Image"  Source="/Resources/2D/BOD.png"  />
                                </StackPanel>

                                <StackPanel Grid.Column="1" HorizontalAlignment="Center" >
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="250" ></RowDefinition>
                                            <RowDefinition Height="250" ></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="200"></ColumnDefinition>
                                            <ColumnDefinition Width="200"></ColumnDefinition>
                                            <ColumnDefinition Width="200"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="DO_Tem" HorizontalAlignment="Center" Content="{Binding Uv254Data,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 1}" />
                                            <Metro:MetroImage Grid.Column="0"  x:Name="DO_TemImage" Source="/Resources/2D/uv254.png"  >
                                            </Metro:MetroImage>
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="DO_" HorizontalAlignment="Center" Content="{Binding DoData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 2}" />
                                            <Metro:MetroImage Grid.Column="0"  Name="DO_Image" Content="DO_Image"  Source="/Resources/2D/DO.png"  />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="2" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="COD_" HorizontalAlignment="Center" Content="{Binding CodData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 3}"/>
                                            <Metro:MetroImage Grid.Column="0"  Name="CDO_Image" Content="CDO_Image"   Source="/Resources/2D/COD.png"  />
                                        </StackPanel>


                                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="PH_Tem" HorizontalAlignment="Center"  Content="{Binding TemperatureData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 4}"></Label>
                                            <Metro:MetroImage Grid.Column="0"  Name="PH_TemImage" Content="PH_TemImage"   Source="/Resources/2D/水温1.png"  />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="PH_" HorizontalAlignment="Center"   Content="{Binding PHData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 5}"></Label>
                                            <Metro:MetroImage Grid.Column="0"  Name="PH_Image" Content="PH_Image" Source="/Resources/2D/PH.png"  />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="2" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
                                            <Label FontSize="36" Name="Turbidity_" HorizontalAlignment="Center"  Content="{Binding TurbidityData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 6}"></Label>
                                            <Metro:MetroImage Grid.Column="0"  Name="Turbidity_Image" Content="Turbidity_Image"  Source="/Resources/2D/悬浮物.png"  />
                                        </StackPanel>

                                    </Grid>

                                </StackPanel>
                                <StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Top" Orientation="Vertical" Margin="20,20,0,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="湿度:" FontSize="20" FontWeight="Black"/>
                                        <TextBlock Text="{Binding HumidityDataData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 0}" FontSize="20" FontWeight="Black" Width="100" HorizontalAlignment="Right"/>
                                        <TextBlock Text="%" FontSize="20" FontWeight="Black" Margin="5,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                        <TextBlock Text="温度:" FontSize="20" FontWeight="Black"/>
                                        <TextBlock Text="{Binding AirTemperatureData,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BodDataToString}, ConverterParameter = 0}" FontSize="20" FontWeight="Black" Width="100" HorizontalAlignment="Right"/>
                                        <TextBlock Text="℃" FontSize="20" FontWeight="Black" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>

                            </Grid>
                        </Metro:MetroTabItem>
                        <Metro:MetroTabItem Header="折线图" Icon="/Resources/tabIcon.png">
                            <Grid>
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,50,0,0">
                                    <local:LiveCharts Width="800" Height="450" >

                                    </local:LiveCharts>

                                </StackPanel>

                            </Grid>

                        </Metro:MetroTabItem>
                        <Label Content="Label"/>
                    </Metro:MetroTabControl>
                </Grid>

            </Metro:MetroMenuTabItem>
            <Metro:MetroMenuTabItem Name="RunstatusTab" Header="运行状态" Icon="/Resources/icon/xray.png" IconMove="/Resources/icon/xray.png" Height="50" TabIndex="2" >
                <TabControl  x:Name="Status"  Foreground="#FF2F48B8" FontSize="14" Style="{StaticResource MahApps.Styles.TabControl.AnimatedSingleRow}" mah:HeaderedControlHelper.HeaderFontWeight="Black" mah:TabControlHelper.Underlined="TabPanel" Background="{x:Null}" >
                    <TabItem Style="{StaticResource MahApps.Styles.TabItem}"  Name="DevStaus" Header="设备状态" >
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Metro:MetroGroupBox Grid.Column="0" Header="Bod状态" FontWeight="Bold"   Margin="0,10,0,0"  VerticalContentAlignment="Top" HorizontalContentAlignment="Center" >
                                <Grid Margin="0,10,0,0"  Height="670">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <!--<Metro:MetroImage Grid.Row="1"  x:Name="BOD_Model_Image" Source="/Resources/Bod_Model.png" Width="300"/>-->
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                        <Grid DataContext="{Binding DevStatusModel}" >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="100"/>
                                                <RowDefinition Height="100"/>
                                                <RowDefinition Height="100"/>
                                                <RowDefinition Height="100"/>

                                            </Grid.RowDefinitions>

                                            <StackPanel Grid.Row="0" Orientation="Horizontal" >
                                                <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding BOD_Connect_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"  />
                                                <Metro:MetroImage Grid.Row="1"  x:Name="BodstatusComm_Image" Source="{Binding Path=BOD_Connect_ImgSource,Converter={StaticResource MyImageConverter}}" Height="80" Width="80" Margin="40,0,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,20,0,0" >
                                                <Label IsEnabled="False" Content="运行状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding BOD_Run_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Grid.Row="1"  x:Name="BodstatusRun_redImage" Source="{Binding Path =BOD_Run_ImgSource,Converter={StaticResource MyImageConverter}}" Height="80" Width="80" Margin="40,0,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,20,0,0" >
                                                <Label IsEnabled="False" Content="告警状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding BOD_Alram_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Grid.Row="1"  x:Name="Bod_Alarm_status_Image" Source="{Binding Path=BOD_Alram_ImgSource,Converter={StaticResource MyImageConverter}}" Height="80" Width="80" Margin="40,0,0,0" />
                                            </StackPanel>

                                            <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,20,0,0" >
                                                <Label IsEnabled="False" Content="做样状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding BOD_Sample_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                            </StackPanel>

                                        </Grid>
                                    </StackPanel>
                                </Grid>
                            </Metro:MetroGroupBox >
                            <StackPanel Grid.Column="1" Margin="20,10,0,0" >
                                <Grid Height="700" DataContext="{Binding DevStatusModel}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="220"/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <Metro:MetroGroupBox Grid.Row="0" Header="PLC状态"  FontWeight="Bold" >

                                        <Grid  Margin="0,10,0,0" >
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition  Width="auto"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Grid.Column="0">
                                                <!--<Metro:MetroImage Grid.Row="1"  x:Name="PLCImage" Source="/Resources/PLC.jpg" Height="140"/>-->
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                                <Grid >
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="80"/>
                                                        <RowDefinition Height="80"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="0" Orientation="Horizontal" >
                                                        <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                        <Label IsEnabled="False" Content="{Binding PLC_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                        <Metro:MetroImage Grid.Row="1"  x:Name="PLCstatusComm_Image" Source="{Binding Path=PLC_Status_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="1" Orientation="Horizontal" >
                                                        <Label IsEnabled="False" Content="运行状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                        <Label IsEnabled="False" Content="{Binding PLC_Run_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                        <Metro:MetroImage Grid.Row="1"  x:Name="PLCstatusRun_Image" Source="{Binding Path=PLC__Run_Status_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                                    </StackPanel>
                                                </Grid>
                                            </StackPanel>
                                        </Grid>
                                    </Metro:MetroGroupBox>
                                    <Metro:MetroGroupBox Grid.Row="1" Header="传感器状态" >
                                        <Grid >
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition/>
                                                <ColumnDefinition Width="33"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>

                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="80"/>
                                                <RowDefinition Height="80"/>
                                                <RowDefinition Height="80"/>
                                                <RowDefinition Height="80"/>
                                                <RowDefinition Height="80"/>
                                            </Grid.RowDefinitions>


                                            <StackPanel Grid.Row="0" Grid.Column="0">
                                                <Label Content="COD 传感器" FontWeight="Normal" FontSize="26" VerticalContentAlignment="Center"   Height="80"/>
                                            </StackPanel>
                                            <StackPanel Grid.Row="1" Grid.Column="0">
                                                <Label Content="DO 传感器" FontWeight="Normal" FontSize="26" VerticalContentAlignment="Center"   Height="80"/>
                                            </StackPanel>
                                            <StackPanel Grid.Row="2" Grid.Column="0">
                                                <Label Content="uv254 传感器" FontWeight="Normal" FontSize="26" VerticalContentAlignment="Center"   Height="80"/>
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Grid.Column="0">
                                                <Label Content="PH值 传感器" FontWeight="Normal" FontSize="26" VerticalContentAlignment="Center"   Height="80"/>
                                            </StackPanel>
                                            <StackPanel Grid.Row="4" Grid.Column="0">
                                                <Label Content="浊度 传感器" FontWeight="Normal" FontSize="26" VerticalContentAlignment="Center"   Height="80"/>
                                            </StackPanel>

                                            <StackPanel Grid.Row="0"  Grid.Column="2" Orientation="Horizontal" >
                                                <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding Cod_Sensor_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Name="COD_Sensor_Img" Grid.Row="1"  Source="{Binding Path=Cod_Sensor_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="1"  Grid.Column="2" Orientation="Horizontal" >
                                                <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding DO_Sensor_Status, Mode=TwoWay}"  FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Name="DO_Sensor_Img" Grid.Row="1"  Source="{Binding Path=Do_Sensor_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="2"  Grid.Column="2" Orientation="Horizontal" >
                                                <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding UV254_Sensor_Status, Mode=TwoWay}"  FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Name="uv254_Sensor_Img" Grid.Row="1"  Source="{Binding Path=UV254_Sensor_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3"  Grid.Column="2" Orientation="Horizontal" >
                                                <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding PH_Sensor_Status, Mode=TwoWay}"  FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Name="PH_Sensor_Img" Grid.Row="1"  Source="{Binding Path=PH_Sensor_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="4"  Grid.Column="2" Orientation="Horizontal" >
                                                <Label IsEnabled="False" Content="通讯状态:" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Label IsEnabled="False" Content="{Binding Tur_Sensor_Status, Mode=TwoWay}" FontSize="20" FontWeight="Bold" VerticalContentAlignment="Center"/>
                                                <Metro:MetroImage Name="Tur_Sensor_Img" Grid.Row="1"  Source="{Binding Path=Tur_Sensor_ImgSource,Converter={StaticResource MyImageConverter}}" Height="60" Width="60" Margin="20,0,0,0" />
                                            </StackPanel>
                                        </Grid>
                                    </Metro:MetroGroupBox>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </TabItem>
                    <TabItem Style="{StaticResource MahApps.Styles.TabItem}"  Header="系统状态" >

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="70"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <!--<StackPanel Grid.Row="0" Orientation="Horizontal">
                                <Label Content="起始时间："  VerticalContentAlignment="Center" FontSize="16" Margin="50,0,0,0"></Label>
                                <DatePicker Name="SysStatusStartPicker" 
                                                    CalendarStyle="{StaticResource CalendarStyle1}" 
                                                    Width="300" 
                                                    FontSize="20" Height="40"
                                                    DatePicker.SelectedDateChanged="SysStatusTimeSelect" 
                                                    Style="{StaticResource MahApps.Styles.DatePicker}" 
                                                    mah:TextBoxHelper.WatermarkAlignment="Center" 
                                                    mah:TextBoxHelper.ClearTextButton="True"
                                                    mah:TextBoxHelper.ButtonWidth="40">
                                </DatePicker>

                                <Label Content="结束时间：" Margin="150,0,0,0" VerticalContentAlignment="Center" FontSize="16"></Label>
                                <DatePicker Name="SysStatusEndPicker" 
                                                    CalendarStyle="{StaticResource CalendarStyle1}" 
                                                    Width="300" 
                                                    FontSize="20"
                                                    Height="40"
                                                    DatePicker.SelectedDateChanged="SysStatusTimeSelect" 
                                                    Style="{StaticResource MahApps.Styles.DatePicker}" 
                                                    mah:TextBoxHelper.WatermarkAlignment="Center" 
                                                    mah:TextBoxHelper.ClearTextButton="True"
                                                    mah:TextBoxHelper.ButtonWidth="40" mah:TextBoxHelper.AutoWatermark="True">
                                </DatePicker>
                            </StackPanel>-->

                            <StackPanel Grid.Row="1">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                </Grid>
                                <StackPanel Grid.Row="0">
                                    <ListView x:Name="SysStatusList" 
                                                      ItemsSource="{Binding SysStatusDataSource}" 
                                                      ItemContainerStyle="{StaticResource ListViewItemStyle}"
                                                      Style="{StaticResource MahApps.Styles.ListView}"  
                                                      VerticalAlignment="Center" 
                                                      DataContext="{Binding SysStatusDataModel}" 
                                                      Height="450">
                                        <ListView.View >
                                            <GridView >
                                                <GridView.ColumnHeaderContainerStyle>
                                                    <Style TargetType="GridViewColumnHeader">
                                                        <Setter Property="HorizontalContentAlignment"  Value="Center"/>
                                                        <Setter Property="FontWeight" Value="Black"/>
                                                        <Setter Property="Height" Value="40"/>
                                                    </Style>
                                                </GridView.ColumnHeaderContainerStyle>

                                                <GridViewColumn Header="序号" Width="40" DisplayMemberBinding="{Binding id}"/>
                                                <GridViewColumn Header="状态信息" Width="350" DisplayMemberBinding="{Binding Status}"/>
                                                <GridViewColumn Header="采集日期" Width="120" DisplayMemberBinding="{Binding CreateDate}"/>
                                                <GridViewColumn Header="采集时间" Width="120" DisplayMemberBinding="{Binding CreateTime}"/>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </StackPanel>

                                <!--<DataGrid Grid.Row="0" ItemsSource="{Binding FakeSource}" AutoGenerateColumns="False" CanUserAddRows="False">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Item Id" Binding="{Binding Id}" Width="80"/>
                                                <DataGridTextColumn Header="Item Name" Binding="{Binding ItemName}" Width="180"/>
                                            </DataGrid.Columns>
                                        </DataGrid>-->

                                <StackPanel Grid.Row="1" Margin="0,30,0,0">

                                    <local:Pager  TotalPage="{Binding TotalPage}" CurrentPage="{Binding CurrentPage, Mode=TwoWay}" HorizontalAlignment="Center" Grid.Row="1" DataContext="{Binding SysStatusDataModel}" >

                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="FirstPage">
                                                <i:InvokeCommandAction Command="{Binding FirstPageCommand}"/>
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="PreviousPage">
                                                <i:InvokeCommandAction Command="{Binding PreviousPageCommand}"/>
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="NextPage">
                                                <i:InvokeCommandAction Command="{Binding NextPageCommand}" />
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="LastPage">
                                                <i:InvokeCommandAction Command="{Binding LastPageCommand}"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </local:Pager>
                                </StackPanel>

                            </StackPanel>

                        </Grid>
                    </TabItem>

                </TabControl>
            </Metro:MetroMenuTabItem >
            <Metro:MetroMenuTabItem Name="RunProcessTab" Header="运行流程" Icon="/Resources/icon/Automator.png" IconMove="/Resources/icon/Automator.png"  VerticalAlignment="Top" Width="auto" FontWeight="Bold" >
                <TabControl  Foreground="#FF2F48B8" FontSize="14" Style="{StaticResource MahApps.Styles.TabControl.AnimatedSingleRow}" mah:HeaderedControlHelper.HeaderFontWeight="Black" mah:TabControlHelper.Underlined="TabPanel" Background="{x:Null}" >
                    <TabItem  Header="流程展示" Style="{StaticResource MahApps.Styles.TabItem}" HorizontalAlignment="Left" Width="119">
                        <Viewbox>
                            <DockPanel>

                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <Label Name="SysStaus" Content="系统运转状态：空闲中........" FontSize="22" FontWeight="Bold" Foreground="#FFEC2299" Margin="20,20,0,0" ></Label>
                                        <local:LoadingWait x:Name="_loading"  Visibility="Collapsed"  Background="{x:Null}" Width="70" Height="70" VerticalAlignment="Top" Margin="0,10,0,0"/>
                                    </StackPanel>
                                    <Grid >
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="139.76"></RowDefinition>
                                            <RowDefinition Height="10.24"/>
                                            <RowDefinition Height="150"></RowDefinition>
                                            <RowDefinition Height="150"></RowDefinition>
                                            <RowDefinition Height="200"></RowDefinition>
                                            <RowDefinition Height="150"></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition Width="170"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Row="0" Orientation="Horizontal" Grid.ColumnSpan="2" Margin="0,0,170,0" Grid.RowSpan="2">
                                            <Metro:MetroImage   x:Name="PumpImage" Content="PumpImage" Source="/Resources/zhushe.png" RenderTransformOrigin="0.5,0.5" HorizontalAlignment="Center"  Margin="425,0,10,0" />
                                            <Metro:MetroButton Name="PumpAbsorb" MetroButtonState="Red" Content="抽水" MinWidth="50"  Height="50" Width="70" Click="MetroButton_Click_3" />
                                            <Metro:MetroButton Name="PumpDrain" MetroButtonState="green" Content="放水" MinWidth="50" Height="50" Width="70" MouseLeftButtonDown="PumpDrain_MouseLeftButtonDown" Click="PumpDrain_Click"  />
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Margin="0,120,170,30" Grid.RowSpan="3" Grid.ColumnSpan="2">
                                            <Metro:MetroImage  Grid.Column="0" x:Name="WaterImage" Content="WaterImage" Source="/Resources/water.png" Margin="225,0,10,0">
                                            </Metro:MetroImage>
                                            <Metro:MetroImage   x:Name="AirImage" Content="AirImage" Source="/Resources/air.png"  Margin="275,0,10,0" />
                                        </StackPanel>

                                        <StackPanel Grid.Row="3" Orientation="Horizontal" Grid.ColumnSpan="2" Margin="0,0,170,0">
                                            <Metro:MetroImage    x:Name="StandImage" Content="StandImage" Source="/Resources/biaoding.png"  Height="150" Margin="100,0,0,0" />
                                            <Metro:MetroImage  x:Name="NomaleImage" Content="NomaleImage" Source="/Resources/nomale.png"   Height="150"  Margin="470,0,0,0" Width="250"/>
                                            <StackPanel Orientation="Vertical">
                                                <Metro:MetroSwitch Name="StandBodValve" Content="BOD标液阀"  CornerRadius="100" FontSize="15" Width="144"  Height="25" HorizontalAlignment="Left" VerticalAlignment="Stretch" Margin="0,40,0,0" IsChecked="True"></Metro:MetroSwitch>
                                                <Metro:MetroProgressBar  x:Name="StandBodView" ProgressBarHeight="20"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="20" Width="220" Margin="-10,0,-20,0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Grid.Row="4" Orientation="Horizontal" Grid.ColumnSpan="2" Margin="0,0,170,0">
                                            <Metro:MetroImage   x:Name="CacheImage" Content="CacheImage" Source="/Resources/huanchong.png" RenderTransformOrigin="0.5,0.5" Margin="200,0,0,0" Height="150" VerticalAlignment="Top">
                                            </Metro:MetroImage>
                                            <Metro:MetroImage   x:Name="SampleImage" Content="SampleImage" Source="/Resources/sample.png" Margin="260,0,0,0" Width="300" Height="150" VerticalAlignment="Bottom"/>
                                            <StackPanel Orientation="Vertical">
                                                <Metro:MetroSwitch Name="SampleBodValve" Content="BOD样液阀"  CornerRadius="100" FontSize="15" Width="144"  Height="25" HorizontalAlignment="Left" Margin="0,102,0,0"/>
                                                <Metro:MetroProgressBar x:Name="SampleBodView" ProgressBarHeight="20"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="20" Width="279" Margin="-10,0,-20,0" />
                                            </StackPanel>

                                        </StackPanel>

                                        <StackPanel Grid.Row="5" Orientation="Horizontal" Grid.ColumnSpan="2" HorizontalAlignment="Left" Width="1276">
                                            <Metro:MetroImage   x:Name="WaterSamplImage" Content="WaterSamplImage" Source="/Resources/shuiyangpng.png" />
                                            <StackPanel  Margin="-10,0,-10,0">
                                                <Metro:MetroButton Name="PumpWaterButton" Content="抽水" MetroButtonState="Green" MinWidth="50" Width="50" Margin="0,50,0,0" Visibility="Visible" Click="PumpWaterButton_Click"/>
                                                <Metro:MetroButton Name="PumpStopButton" Content="停止" MetroButtonState="None" MinWidth="50" Width="50" Margin="0,50,0,0" Visibility="Collapsed" Click="PumpStopButton_Click" />

                                                <Metro:MetroProgressBar x:Name="WaterSampleView" ProgressBarHeight="20"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="20" Width="160" />
                                            </StackPanel>
                                            <Metro:MetroImage   x:Name="StoreImage" Content="StoreImage" Source="/Resources/store.png"    />
                                            <StackPanel>
                                                <Metro:MetroSwitch Name="RowValve" Content="排口阀"  CornerRadius="100" FontSize="15" Width="102"  Height="25" HorizontalAlignment="Left" Margin="0,65,0,0" Checked="RowValve_Checked"/>
                                                <Metro:MetroProgressBar x:Name="RowView" ProgressBarHeight="20"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="20" Width="472" Margin="-10,0,0,0" />
                                            </StackPanel>
                                            <Metro:MetroImage   Name="RowImage" Content="RowImage" Source="/Resources/paikou.png" Height="134" Width="230"    />

                                        </StackPanel>


                                        <Metro:MetroImage Margin="382,118,0,0" Grid.RowSpan="2" Grid.Row="2" x:Name="ValveImage" Content="ValveImage" Source="/Resources/fa.png"  Height="180" Width="180" VerticalAlignment="Top" HorizontalAlignment="Left" Panel.ZIndex="1"/>

                                        <Metro:MetroProgressBar Name="PumpView" ProgressBarHeight="30" RenderTransformOrigin="0.5,0.5" CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Margin="409,44,577,80" Grid.Row="2">
                                            <Metro:MetroProgressBar.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform/>
                                                    <RotateTransform Angle="-90"/>
                                                    <TranslateTransform/>
                                                </TransformGroup>
                                            </Metro:MetroProgressBar.RenderTransform>
                                        </Metro:MetroProgressBar>

                                        <StackPanel Orientation="Vertical" Margin="322,66,673,34" Grid.Row="2">
                                            <StackPanel.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform/>
                                                    <RotateTransform Angle="28.841"/>
                                                    <TranslateTransform/>
                                                </TransformGroup>
                                            </StackPanel.RenderTransform>
                                            <Metro:MetroSwitch x:Name="WaterValve" Content="清水阀"  CornerRadius="100" FontSize="12" Width="100"  Height="25" HorizontalAlignment="Left" Checked="Valves_Checked"/>
                                            <Metro:MetroProgressBar Name="WaterView" ProgressBarHeight="30" RenderTransformOrigin="0.5,0.5" CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="25"/>
                                        </StackPanel>

                                        <StackPanel Margin="288,7,677,143" Grid.Row="4">
                                            <StackPanel.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform/>
                                                    <RotateTransform Angle="-21.432"/>
                                                    <TranslateTransform/>
                                                </TransformGroup>
                                            </StackPanel.RenderTransform>
                                            <Metro:MetroProgressBar Name="CacheView" ProgressBarHeight="25"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="25" >
                                            </Metro:MetroProgressBar>
                                            <Metro:MetroSwitch x:Name="CacheValve" Content="缓冲液阀"  CornerRadius="100" FontSize="15" Width="120" Height="25"  HorizontalAlignment="Left" Checked="Valves_Checked" />
                                        </StackPanel>


                                        <StackPanel Grid.Row="2" Margin="200,138,715,107" Orientation="Vertical" Grid.RowSpan="2">
                                            <Metro:MetroSwitch x:Name="StandValve" Content="标液阀" CornerRadius="100" FontSize="15" RenderTransformOrigin="0.296,0.615"  Width="122" Height="25"  HorizontalAlignment="Left" Checked="Valves_Checked"/>
                                            <Metro:MetroProgressBar Name="StandardView" ProgressBarHeight="30" RenderTransformOrigin="0.5,0.5"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="25" Width="200" Panel.ZIndex="4" />
                                        </StackPanel>

                                        <StackPanel  Margin="642,57,343,38" Grid.Row="2" Orientation="Vertical">
                                            <StackPanel.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform AngleY="0.287"/>
                                                    <RotateTransform Angle="-394.947"/>
                                                    <TranslateTransform X="-101.054" Y="108.838"/>
                                                </TransformGroup>
                                            </StackPanel.RenderTransform>
                                            <Metro:MetroProgressBar x:Name="AirView" ProgressBarHeight="30" RenderTransformOrigin="1.624,0.372" CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="25"/>
                                            <Metro:MetroSwitch x:Name="AirValve" Content="空气/废液阀"  CornerRadius="200" FontSize="13" RenderTransformOrigin="0.296,0.615"  Width="130" Height="25" Checked="Valves_Checked"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Vertical" Margin="534,57,431,43" Grid.Row="3">
                                            <Metro:MetroProgressBar Name="NormalView" ProgressBarHeight="30" RenderTransformOrigin="0.5,0.5" CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="25"  />
                                            <Metro:MetroSwitch Name="NormalValve" Content="标液阀"  HorizontalAlignment="Right" CornerRadius="200" FontSize="15"  Width="98" Height="25" Checked="Valves_Checked" IsChecked="False"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Vertical" Margin="523,102,442,198" Grid.Row="3" Grid.RowSpan="2">
                                            <StackPanel.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform/>
                                                    <RotateTransform Angle="420.869"/>
                                                    <TranslateTransform/>
                                                </TransformGroup>
                                            </StackPanel.RenderTransform>
                                            <Metro:MetroProgressBar Name="SampleView" ProgressBarHeight="30"  CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="25" >
                                            </Metro:MetroProgressBar>
                                            <Metro:MetroSwitch x:Name="Valve" Content="送样(样液)阀" CornerRadius="100" FontSize="15" Width="130" Height="25" HorizontalAlignment="Right" Checked="Valves_Checked"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Vertical"  Grid.Row="5" Margin="459,5,426,95">
                                            <StackPanel.RenderTransform >
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform AngleX="-0.673"/>
                                                    <RotateTransform Angle="269.934"/>
                                                    <TranslateTransform X="4.41" Y="8.147"/>
                                                </TransformGroup>
                                            </StackPanel.RenderTransform>
                                            <Metro:MetroProgressBar Name="StoreWaterView" ProgressBarHeight="25"   CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="20" >
                                            </Metro:MetroProgressBar>
                                            <Metro:MetroSwitch x:Name="StoreValve" Content="储水池阀门" CornerRadius="100" FontSize="15" Width="150" Height="25" HorizontalAlignment="Left" Checked="Valves_Checked"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Grid.RowSpan="6" Margin="0,0,0,126">
                                            <Grid  Width="150">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="150"/>
                                                    <RowDefinition Height="150"/>
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>


                                                <StackPanel Grid.Row="0">
                                                    <Metro:MetroImage   x:Name="WashImage1" Source="/Resources/qingxi.png" Width="120"/>

                                                </StackPanel>

                                                <StackPanel Orientation="Vertical" Grid.Row="1" RenderTransformOrigin="0.5,0.5" >
                                                    <StackPanel.LayoutTransform>
                                                        <TransformGroup>
                                                            <ScaleTransform/>
                                                            <SkewTransform/>
                                                            <RotateTransform Angle="90"/>
                                                            <TranslateTransform/>
                                                        </TransformGroup>
                                                    </StackPanel.LayoutTransform>
                                                    <Metro:MetroProgressBar Name="WashView" ProgressBarHeight="27"   CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="30" Margin="0,70,0,0" Width="155" />
                                                    <Metro:MetroSwitch x:Name="WashValve" Content="清洗阀门"  CornerRadius="100" FontSize="15" Width="116" Height="26" RenderTransformOrigin="0.5,0.5" Click="WashValve_Click"/>


                                                    <!--<Metro:MetroProgressBar ProgressBarHeight="25"   CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="20" />-->
                                                </StackPanel>

                                                <StackPanel Grid.Row="2" Orientation="Vertical">

                                                    <Metro:MetroImage   x:Name="BodImage" Source="/Resources/Bod.png" Width="163" Height="310" SnapsToDevicePixels="True" ImageHorizontalAlignment="Stretch" ImageVerticalAlignment="Stretch" Margin="0,-5,0,0" />
                                                    <StackPanel Orientation="Vertical" RenderTransformOrigin="0.5,0.5" Width="90">
                                                        <StackPanel.RenderTransform>
                                                            <TransformGroup>
                                                                <ScaleTransform/>
                                                                <SkewTransform/>
                                                                <RotateTransform Angle="90"/>
                                                                <TranslateTransform/>
                                                            </TransformGroup>
                                                        </StackPanel.RenderTransform>
                                                        <Metro:MetroProgressBar Name="BodRowView" ProgressBarHeight="27"   CornerRadius="0" ProgressBarState="None"  ShowHit="False" Value="1" Height="30" Margin="20,-5,0,0" Width="88" BorderThickness="2,0,0,0" />
                                                        <Metro:MetroSwitch x:Name="BodRowValve"   CornerRadius="100" FontSize="15" Width="54" Height="26" RenderTransformOrigin="0.0,0.0"/>

                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>


                                    </Grid>
                                </Grid>
                            </DockPanel>
                        </Viewbox>
                    </TabItem>
                    <TabItem Name="SingleProcessTab" Header="单个流程调试" Style="{StaticResource MahApps.Styles.TabItem}">
                        <StackPanel >
                            <!--<StackPanel>-->
                            <GroupBox  Style="{StaticResource MahApps.Styles.GroupBox}" Header="准备流程">
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,10">
                                    <Metro:MetroButton Width="100" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="预处理" Name="PreButton" Click="PreButton_Click" Margin="20,0,0,0"></Metro:MetroButton>
                                    <Metro:MetroButton Width="120" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="吸取0.2ml到标液" Name="PreButton2ml" Click="PreButton2ml_ClickAsync" Margin="20,0,0,0"></Metro:MetroButton>
                                    <Metro:MetroButton Width="100" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="吸取0.2ml" Name="Pre2ml" Click="Pre2ml_Click" Margin="20,0,0,0"></Metro:MetroButton>
                                    <Metro:MetroButton Width="100" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="排水0.2ml" Name="Pumpdrain2ml" Click="Pumpdrain2ml_Click" Margin="20,0,0,0"></Metro:MetroButton>
                                    <Metro:MetroButton Width="150" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="泵预备阀抽取空气" Name="PrePumpAri" Click="PrePumpAri_Click" Margin="20,0,0,0"></Metro:MetroButton>
                                    <Metro:MetroButton Width="150" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="泵预备阀抽取清水" Name="PrePumpwater" Click="PrePumpwater_Click" Margin="20,0,0,0"></Metro:MetroButton>
                                    <Metro:MetroButton Width="100" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="排空溶液" Name="DrainEmpty"  Margin="20,0,0,0" Click="DrainEmpty_Click"></Metro:MetroButton>
                                    <Metro:MetroButton Width="100" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Content="更新传感器数据" Name="UpdataData"  Margin="20,0,0,0" Click="UpdataData_Click"></Metro:MetroButton>
                                </StackPanel>
                            </GroupBox>
                            <Grid  Margin="0,10,0,0" >
                                <Metro:MetroWaterfallFlow ListWidth="600">
                                    <Grid>
                                        <GroupBox  Style="{StaticResource MahApps.Styles.GroupBox}"  Header="标液流程" Margin="0,0,5,0" Height="253" VerticalAlignment="Top">
                                            <StackPanel>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition/>
                                                        <ColumnDefinition Width="319.5"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Metro:MetroGroupBox Header="单步操作" Margin="0,0,319,0" Grid.Column="0" Grid.ColumnSpan="2" Height="215" VerticalAlignment="Bottom">
                                                        <StackPanel Orientation="Vertical">
                                                            <ComboBox>
                                                                <ComboBoxItem  Content="1ml" Tag="1"></ComboBoxItem>
                                                                <ComboBoxItem  Content="5ml" Tag="2"></ComboBoxItem>
                                                            </ComboBox>
                                                            <Metro:MetroTextBox Name="PunpStand" Title="抽取标液:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 50ml" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="PunpStand_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroTextBox Name="PumpCache" Title="抽取清水:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 10ml" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="PumpCache_ButtonClick"  GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus" />
                                                            <Metro:MetroTextBox Name="DrainCahce" Title="标液排水:" TitleForeground="Red" FontSize="15" InputHint="请输入排水次数"  PopupHint="不大于 10次" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="DrainCahce_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                        </StackPanel>

                                                    </Metro:MetroGroupBox>
                                                    <Metro:MetroGroupBox Header="标液稀释" Margin="20,20,0,0" Grid.Column="1">
                                                        <StackPanel>
                                                            <Metro:MetroTextBox Name="StandAll" Title="标液容量:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 50ml" Margin="0,20,0,0"  GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroTextBox Name="Dilution" Title="稀释倍数:" TitleForeground="Red" FontSize="15" InputHint="请输入整数"  Margin="0,20,0,0"  GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroButton Name="StandDilution" Content="执行" MetroButtonState ="Green" IsEnabled="True" Width="80"  Margin="0,20,0,0" HorizontalAlignment="Right" Click="StandDilution_Click" />

                                                        </StackPanel>
                                                    </Metro:MetroGroupBox>
                                                </Grid>
                                            </StackPanel>
                                        </GroupBox>
                                    </Grid>
                                    <Grid>
                                        <GroupBox  Style="{StaticResource MahApps.Styles.GroupBox}"  Header="样液流程"  >
                                            <StackPanel  Orientation="Vertical">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition/>
                                                        <ColumnDefinition/>
                                                    </Grid.ColumnDefinitions>

                                                    <Metro:MetroGroupBox Header="单步操作" Margin="0,20,0,0" Grid.Column="0">
                                                        <StackPanel>
                                                            <ComboBox>
                                                                <ComboBoxItem  Content="1ml" Tag="1"></ComboBoxItem>
                                                                <ComboBoxItem  Content="5ml" Tag="2"></ComboBoxItem>
                                                            </ComboBox>
                                                            <Metro:MetroTextBox Name="PunpSample" Title="抽取样液:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 50ml" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="PunpSample_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroTextBox Name="PumpWater" Title="抽取清水:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 10ml" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="PumpWater_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroTextBox Name="PumpCache1" Title="抽取缓冲液:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 10ml" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="PumpCache1_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroTextBox Name="DrainSample" Title="样液排水:" TitleForeground="Red" FontSize="15" InputHint="请输入排水次数"  PopupHint="不大于 10次" ButtonTitle="确定" Margin="0,20,0,0" ButtonClick="DrainSample_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus" />

                                                        </StackPanel>

                                                    </Metro:MetroGroupBox>

                                                    <Metro:MetroGroupBox Header="标液稀释" Margin="20,20,0,0" Grid.Column="1">
                                                        <StackPanel>
                                                            <Metro:MetroTextBox Name="SampleAll" Title="样液容量:" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 50ml" Margin="0,20,0,0"  GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroTextBox Name="DilutionSamp" Title="COD稀释倍数:" TitleForeground="Red" FontSize="15" InputHint="请输入整数"  Margin="0,20,0,0" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                            <Metro:MetroButton Name="SampleDilution" Content="执行" MetroButtonState ="Green" IsEnabled="True" Width="80"  Margin="0,20,0,0" HorizontalAlignment="Right" Click="SampleDilution_Click"/>

                                                        </StackPanel>
                                                    </Metro:MetroGroupBox>
                                                </Grid>

                                            </StackPanel>

                                        </GroupBox>
                                    </Grid>
                                    <Grid>
                                        <GroupBox Style="{StaticResource MahApps.Styles.GroupBox}" Header="流程调试" >

                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition/>
                                                    <RowDefinition Height="20"/>
                                                    <RowDefinition/>
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>


                                                <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="0">
                                                    <Button Style="{StaticResource MahApps.Styles.Button.Circle}"  Width="70" Height="70" Background="#CC0078D7" BorderThickness="5" Click="StartBodSampleWater_Click"></Button>
                                                    <TextBlock Text="测量BOD"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                </StackPanel>
                                                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Vertical">

                                                    <Button Style="{StaticResource MahApps.Styles.Button.Circle}"  Width="70" Height="70" Background="#CC0078D7" BorderThickness="5" Click="StartBodStandWater_Click"  ></Button>
                                                    <TextBlock Text="标定BOD"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                </StackPanel>


                                                <StackPanel Grid.Row="0" Grid.Column="2" Orientation="Vertical">
                                                    <Button Style="{StaticResource MahApps.Styles.Button.Circle}"   Width="70" Height="70" Background="#CC0078D7" BorderThickness="5"   Click="restart_Click"></Button>
                                                    <TextBlock Text="复位"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>
                                                </StackPanel>


                                                <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Vertical">

                                                    <Button Style="{StaticResource MahApps.Styles.Button.Circle}"   Width="70" Height="70" Background="#CC0078D7" BorderThickness="5"  Click="MeasureCod_Click"></Button>
                                                    <TextBlock Text="开始COD测量"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                </StackPanel>
                                                <StackPanel Grid.Row="2" Orientation="Vertical" Grid.Column="1">
                                                    <Button Style="{StaticResource MahApps.Styles.Button.Circle}"   Width="70" Height="70" Background="#CC0078D7" BorderThickness="5" Click="FetchWater_Click" ></Button>
                                                    <TextBlock Text="采水"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                </StackPanel>


                                                <StackPanel Grid.Row="2" Grid.Column="2" Orientation="Vertical">

                                                    <Button Style="{StaticResource MahApps.Styles.Button.Circle}"  Width="70" Height="70" Background="#CC0078D7" BorderThickness="5"  Click="UpdataData_Click" ></Button>
                                                    <TextBlock Text="获取其他传感器数据"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                </StackPanel>

                                            </Grid>

                                        </GroupBox>

                                    </Grid>
                                    <Grid>
                                        <GroupBox  Style="{StaticResource MahApps.Styles.GroupBox}" Header="润洗流程" Padding="10,20,10,20"  Grid.RowSpan="2">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" Orientation="Vertical">
                                                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                                        <Metro:MetroButton Name="sample_start" Content="储水池取样开始" MetroButtonState ="Green" IsEnabled="True" Click="sample_start_Click"/>
                                                        <Metro:MetroButton Name="sample_end" Content="储水池取样停止" MetroButtonState ="None" IsEnabled="False" Margin="20,0,0,0" Click="sample_end_Click" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                                        <Metro:MetroButton Name="drain_start" Content="储水池排水开始" MetroButtonState ="Green" IsEnabled="True" Click="drain_start_Click"/>
                                                        <Metro:MetroButton Name="drain_end" Content="储水池排水停止" MetroButtonState ="None" IsEnabled="False" Margin="20,0,0,0" Click="drain_end_Click"/>
                                                    </StackPanel>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Orientation="Vertical">
                                                    <ComboBox Width="200" HorizontalAlignment="Left" Margin="10,10,0,0" Style="{StaticResource MahApps.Styles.ComboBox}">
                                                        <ComboBoxItem  Content="1ml" Tag="1"></ComboBoxItem>
                                                        <ComboBoxItem  Content="5ml" Tag="2"></ComboBoxItem>
                                                    </ComboBox>
                                                    <StackPanel Orientation="Horizontal" Margin="0,13,0,0" >
                                                        <Metro:MetroTextBox Name="wash" Title="清洗管道" TitleForeground="Red" FontSize="15" InputHint="请输入整数(ml)"  PopupHint="不大于 10ml" ButtonTitle="确定"  ButtonClick="wash_ButtonClick" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
                                                    </StackPanel>
                                                </StackPanel>

                                            </Grid>
                                        </GroupBox>

                                    </Grid>
                                </Metro:MetroWaterfallFlow>
                            </Grid>
                        </StackPanel>
                    </TabItem>
                    <TabItem Header="BOD流程调试" Style="{StaticResource MahApps.Styles.TabItem}">
                        <Metro:MetroWaterfallFlow ListWidth="600">
                            <Grid>
                                <GroupBox  Style="{StaticResource MahApps.Styles.GroupBox}" Header="BOD流程控制" Padding="10,20,10,20"  Grid.RowSpan="2" >
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition/>
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0">
                                                    <Metro:MetroGroupBox Header="标液测量控制"  Grid.Row="0">
                                                        <StackPanel Orientation="Vertical">
                                                            <Metro:MetroTextBox Width="280" Name="SetStandData" Title="设置BOD标准浓度:" TitleForeground="Red" FontSize="14"  ButtonTitle="确定"   Margin="0,10,0,0" ButtonClick="SetBodStand_click" />
                                                            <StackPanel Orientation="Horizontal">
                                                                <Metro:MetroButton Name="BodStand" Content="Bod开始标准测量" Width="130" Height="40" Click="StartBodStand_click" MetroButtonState="None" Margin="0,20,0,0"/>
                                                                <Metro:MetroButton  Content="取消标准做样" Width="130" Height="40" Click="StopBodAndWash" MetroButtonState="None" Margin="30,20,0,0" />
                                                            </StackPanel>

                                                        </StackPanel>
                                                    </Metro:MetroGroupBox>

                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                    <Metro:MetroGroupBox Header="样液测量控制"  Grid.Row="1" >
                                                        <StackPanel Orientation="Vertical">
                                                            <Metro:MetroTextBox Width="280" Name="SetSampleDli" Title="设置BOD稀释倍数:" TitleForeground="Red" FontSize="14"  ButtonTitle="确定" ButtonClick="SetBodSampleDil_click" Margin="0,10,0,0"  />
                                                            <StackPanel Orientation="Horizontal">
                                                                <Metro:MetroButton Name="BodSample" Content="Bod开始测量样品" Width="130" Height="40" Click="StartBodSample_click" MetroButtonState="None" Margin="0,20,0,0" HorizontalAlignment="Left"/>
                                                                <Metro:MetroButton  Content="取消做样" Width="100" Height="40" Click="StopBodAndWash" MetroButtonState="None" Margin="30,20,0,0" HorizontalAlignment="Right"/>

                                                            </StackPanel>
                                                        </StackPanel>
                                                    </Metro:MetroGroupBox>

                                                </StackPanel>

                                            </Grid>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Margin="0,10,0,0">
                                            <Metro:MetroGroupBox Header="其他状态控制" Grid.Row="2">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition/>
                                                        <ColumnDefinition/>
                                                        <ColumnDefinition/>
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Orientation="Vertical"  Grid.Column="0">
                                                        <Button Style="{StaticResource MahApps.Styles.Button.Circle}"  Width="70" Height="70" Background="#CC0078D7" BorderThickness="5" Click="StopBodAndWash"></Button>
                                                        <TextBlock Text="取消做样,进行清洗"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                    </StackPanel>

                                                    <StackPanel Grid.Row="0"  Grid.Column="1">
                                                        <Button Style="{StaticResource MahApps.Styles.Button.Circle}"   Width="70" Height="70" Background="#CC0078D7" BorderThickness="5" Click="ClearAlram_click" ></Button>
                                                        <TextBlock Text="清除警告"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>

                                                    </StackPanel>

                                                    <StackPanel Grid.Row="0" Grid.Column="2">
                                                        <Button Style="{StaticResource MahApps.Styles.Button.Circle}"   Width="70" Height="70" Background="#CC0078D7" BorderThickness="5"   Click="ResetBod_click"></Button>
                                                        <TextBlock Text="系统复位"  FontSize="22" Foreground="Red" HorizontalAlignment="Center"/>
                                                    </StackPanel>

                                                </Grid>

                                            </Metro:MetroGroupBox>
                                        </StackPanel>

                                    </Grid>
                                </GroupBox>
                            </Grid>
                            <Grid>
                                <GroupBox  Style="{StaticResource MahApps.Styles.GroupBox}" Header="获取BOD状态" Padding="10,20,10,20"  Grid.RowSpan="2">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition/>
                                            <RowDefinition/>
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0"  Orientation="Horizontal">
                                            <Metro:MetroTextBox Name="BodStatus_text" Width="280"  Title="当前BOD状态:" TitleForeground="Red" FontSize="14"  ButtonTitle="获取" ButtonClick="GetBodStatus_click"/>
                                            <Metro:MetroTextBox Name="SampleStatus_box" Width="280"  Title="当前采样状态:" TitleForeground="Red" FontSize="14"  ButtonTitle="获取" HorizontalAlignment="Right" Margin="40,0,0,0" ButtonClick="GetBodSampleStatus_click" />
                                        </StackPanel>
                                        <StackPanel Grid.Row="1"  Orientation="Horizontal" Margin="0,10,0,0">
                                            <Metro:MetroTextBox Name="ElePot_textbox" Width="280"  Title="电极电位值:" TitleForeground="Red" FontSize="14"  ButtonTitle="获取" ButtonClick="GetElepot_click"/>
                                            <Metro:MetroTextBox Name="AlramInfo_textbox" Width="280"  Title="设备告警状态:" TitleForeground="Red" FontSize="14"  ButtonTitle="获取" HorizontalAlignment="Right" Margin="40,0,0,0" ButtonClick="GetAlramInfo_click" />
                                        </StackPanel>
                                        <StackPanel Grid.Row="2"  Margin="0,10,0,0">
                                            <Metro:MetroGroupBox >
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition />
                                                        <ColumnDefinition />
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Grid.Column="0" HorizontalAlignment="Left">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>
                                                            <StackPanel Grid.Row="0" Orientation="Vertical">
                                                                <Grid >
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="50"/>
                                                                        <RowDefinition Height="50"/>
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="100"/>
                                                                        <ColumnDefinition Width="50"/>
                                                                        <ColumnDefinition Width="100"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <StackPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">
                                                                        <Label Content="BOD标准值：" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" ></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                                        <Label x:Name="BodStandData" Content="0"   Width="50" HorizontalAlignment="Center" VerticalAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="0" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                                        <Label Content="单位：mg/l" VerticalContentAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">
                                                                        <Label Content="电位降：" VerticalContentAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                                        <Label  Name="StandElePotDrop_lab" Content="0"  HorizontalAlignment="Center" VerticalAlignment="Center"  Width="50"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="1" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                                        <Label Content="单位：uA" VerticalContentAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </StackPanel>

                                                            <StackPanel Grid.Row="1" HorizontalAlignment="Right" Margin="0,10,0,0">
                                                                <Metro:MetroButton  Content="获取数据" Width="60" Height="40" MetroButtonState="Red" Click="GetBodStandData_click"></Metro:MetroButton>
                                                            </StackPanel>
                                                        </Grid>
                                                    </StackPanel>

                                                    <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>
                                                            <StackPanel Grid.Row="0" Orientation="Vertical">
                                                                <Grid >
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="50"/>
                                                                        <RowDefinition Height="50"/>
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="100"/>
                                                                        <ColumnDefinition Width="50"/>
                                                                        <ColumnDefinition Width="100"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <StackPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">
                                                                        <Label Content="当前BOD值：" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" ></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                                        <Label  Name="CurrentData_lab" Content="0"   Width="50" HorizontalAlignment="Center" VerticalAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="0" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                                        <Label Content="单位：mg/l" VerticalContentAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">
                                                                        <Label Content="电位降：" VerticalContentAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                                        <Label Name="CurrentElePotDrop_lab" Content="0"  HorizontalAlignment="Center" VerticalAlignment="Center"  Width="50"></Label>
                                                                    </StackPanel>
                                                                    <StackPanel Grid.Row="1" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                                        <Label Content="单位：uA" VerticalContentAlignment="Center"></Label>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </StackPanel>

                                                            <StackPanel Grid.Row="1" HorizontalAlignment="Right" Margin="0,10,0,0">
                                                                <Metro:MetroButton Content="获取数据" Width="60" Height="40" MetroButtonState="Red" Click="GetBodCurrentData_click"></Metro:MetroButton>
                                                            </StackPanel>
                                                        </Grid>
                                                    </StackPanel>
                                                </Grid>
                                            </Metro:MetroGroupBox>
                                        </StackPanel>


                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </Metro:MetroWaterfallFlow>
                    </TabItem>

                </TabControl>
            </Metro:MetroMenuTabItem>
            <Metro:MetroMenuTabItem Name="ShowDataTab" Header="数据展示" Icon="/Resources/icon/Briefcase PixelPress Media Design.png" IconMove="/Resources/icon/Briefcase PixelPress Media Design.png" Height="50">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="110"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0">
                        <Metro:MetroImage Grid.Row="0"  Content="BiaotiImage"  HorizontalAlignment="Center"  VerticalAlignment="Top" Source="/Resources/biaoti.png"  />
                    </StackPanel>

                    <StackPanel Grid.Row="1" Margin="5,0,0,0" Background="White" >
                        <Metro:MetroTabControl x:Name="Datatabc"  Foreground="#FF2F48B8" FontSize="14">

                            <Metro:MetroTabItem Header="历史数据" Icon="/Resources/tabIcon.png">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="70"/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                        <Label Content="起始时间："  VerticalContentAlignment="Center" FontSize="16" Margin="50,0,0,0"></Label>
                                        <DatePicker Name="HisDataStartPicker" 
                                                    CalendarStyle="{StaticResource CalendarStyle1}" 
                                                    Width="300" 
                                                    FontSize="20" Height="40"
                                                    DatePicker.SelectedDateChanged="HisDataTimeSelect" 
                                                    Style="{StaticResource MahApps.Styles.DatePicker}" 
                                                    mah:TextBoxHelper.WatermarkAlignment="Center" 
                                                    mah:TextBoxHelper.ClearTextButton="True"
                                                    mah:TextBoxHelper.ButtonWidth="40">
                                        </DatePicker>

                                        <Label Content="结束时间：" Margin="150,0,0,0" VerticalContentAlignment="Center" FontSize="16"></Label>
                                        <DatePicker Name="HisDataEndPicker" 
                                                    CalendarStyle="{StaticResource CalendarStyle1}" 
                                                    Width="300" 
                                                    FontSize="20"
                                                    Height="40"
                                                    DatePicker.SelectedDateChanged="HisDataTimeSelect" 
                                                    Style="{StaticResource MahApps.Styles.DatePicker}" 
                                                    mah:TextBoxHelper.WatermarkAlignment="Center" 
                                                    mah:TextBoxHelper.ClearTextButton="True"
                                                    mah:TextBoxHelper.ButtonWidth="40" mah:TextBoxHelper.AutoWatermark="True">
                                        </DatePicker>

                                        <Metro:MetroButton Content="导出数据" MetroButtonState="Green" Click="HisDataExport_click" Width="150" Height="40" Margin="50,0,0,0" VerticalAlignment="Center"></Metro:MetroButton>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>
                                        </Grid>
                                        <StackPanel Grid.Row="0">
                                            <ListView x:Name="HisParamList" 
                                                      ItemsSource="{Binding FakeSource}" 
                                                      ItemContainerStyle="{StaticResource ListViewItemStyle}"
                                                      Style="{StaticResource MahApps.Styles.ListView}"  
                                                      VerticalAlignment="Center" 
                                                      DataContext="{Binding HisParamData}" 
                                                      Height="450">
                                                <ListView.View >
                                                    <GridView >
                                                        <GridView.ColumnHeaderContainerStyle>
                                                            <Style TargetType="GridViewColumnHeader">
                                                                <Setter Property="HorizontalContentAlignment"  Value="Center"/>
                                                                <Setter Property="FontWeight" Value="Black"/>
                                                                <Setter Property="Height" Value="40"/>
                                                            </Style>
                                                        </GridView.ColumnHeaderContainerStyle>

                                                        <GridViewColumn Header="序号" Width="40" DisplayMemberBinding="{Binding Id}"/>
                                                        <GridViewColumn Header="UV254值" Width="100" DisplayMemberBinding="{Binding Uv254Data,Converter={StaticResource HisParamDataToString}, ConverterParameter = 1}"/>
                                                        <GridViewColumn Header="Do值" Width="100" DisplayMemberBinding="{Binding DoData,Converter={StaticResource HisParamDataToString}, ConverterParameter = 2}"/>
                                                        <GridViewColumn Header="浊度值" Width="100" DisplayMemberBinding="{Binding TurbidityData,Converter={StaticResource HisParamDataToString}, ConverterParameter = 3}"/>
                                                        <GridViewColumn Header="PH值" Width="100" DisplayMemberBinding="{Binding PHData,Converter={StaticResource HisParamDataToString}, ConverterParameter = 5}"/>
                                                        <GridViewColumn Header="温度" Width="100" DisplayMemberBinding="{Binding TemperatureData,Converter={StaticResource HisParamDataToString}, ConverterParameter = 4}"/>
                                                        <GridViewColumn Header="COD" Width="100" DisplayMemberBinding="{Binding CodData, Converter={StaticResource HisParamDataToString}, ConverterParameter = 6}"/>
                                                        <GridViewColumn Header="BOD" Width="100" DisplayMemberBinding="{Binding Bod,Converter={StaticResource HisParamDataToString}, ConverterParameter = 0}"/>
                                                        <GridViewColumn Header="初始电位值" Width="100" DisplayMemberBinding="{Binding BodElePot,Converter={StaticResource HisParamDataToString}, ConverterParameter = 7}"/>
                                                        <GridViewColumn Header="电位降" Width="100" DisplayMemberBinding="{Binding BodElePotDrop,Converter={StaticResource HisParamDataToString}, ConverterParameter = 8}"/>
                                                        <GridViewColumn Header="采集日期" Width="120" DisplayMemberBinding="{Binding CreateDate}"/>
                                                        <GridViewColumn Header="采集时间" Width="120" DisplayMemberBinding="{Binding CreateTime}"/>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Margin="0,30,0,0">

                                            <local:Pager  TotalPage="{Binding TotalPage}" CurrentPage="{Binding CurrentPage, Mode=TwoWay}" HorizontalAlignment="Center" Grid.Row="1" DataContext="{Binding HisParamData}" >

                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="FirstPage">
                                                        <i:InvokeCommandAction Command="{Binding FirstPageCommand}"/>
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="PreviousPage">
                                                        <i:InvokeCommandAction Command="{Binding PreviousPageCommand}"/>
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="NextPage">
                                                        <i:InvokeCommandAction Command="{Binding NextPageCommand}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="LastPage">
                                                        <i:InvokeCommandAction Command="{Binding LastPageCommand}"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </local:Pager>
                                        </StackPanel>

                                    </StackPanel>

                                </Grid>
                            </Metro:MetroTabItem>
                            <Metro:MetroTabItem Header="日志数据" Icon="/Resources/tabIcon.png">
                                <ListBox x:Name="logList" FontSize="20"  Background="{x:Null}" Height="450">
                                    <ListBoxItem Content="error:PLC 连接异常" Style="{StaticResource MahApps.Styles.ListBoxItem}" ></ListBoxItem>
                                    <ListBoxItem Content="warning: 传感器连接异常"></ListBoxItem>
                                </ListBox>
                            </Metro:MetroTabItem>
                        </Metro:MetroTabControl>
                    </StackPanel>
                </Grid>
            </Metro:MetroMenuTabItem>
            <Metro:MetroMenuTabItem Name="AlarmInfoTab" Header="报警信息" Icon="/Resources/icon/BioHazard.png" IconMove="/Resources/icon/BioHazard.png" Height="50">

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="110"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0">
                        <Metro:MetroImage Grid.Row="0"  Content="BiaotiImage"  HorizontalAlignment="Center"  VerticalAlignment="Top" Source="/Resources/biaoti.png"  />
                    </StackPanel>

                    <StackPanel Grid.Row="1" Margin="5,0,0,0" Background="White">
                        <Metro:MetroTabControl x:Name="DataAlarm"  Foreground="#FF2F48B8" FontSize="14" >
                            <!--<Metro:MetroTabItem Header="未处理报警信息" Icon="/Resources/tabIcon.png">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    --><!--<DataGrid Grid.Row="0" ItemsSource="{Binding FakeSource}" AutoGenerateColumns="False" CanUserAddRows="False">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Item Id" Binding="{Binding Id}" Width="80"/>
                                                <DataGridTextColumn Header="Item Name" Binding="{Binding ItemName}" Width="180"/>
                                            </DataGrid.Columns>
                                        </DataGrid>--><!--

                                    <DataGrid Name="AlarmList" Grid.Row="0" Margin="0,10,0,0" Height="450">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="序号" Width="50" Binding="{Binding id}"/>
                                            <DataGridTextColumn Header="设备信息" Width="150" Binding="{Binding DeviceInfo}"/>
                                            <DataGridTextColumn Header="报警码" Width="200" Binding="{Binding AlramNum}"/>
                                            <DataGridTextColumn Header="报警信息" Width="200" Binding="{Binding AlramInfo}"/>
                                            <DataGridTextColumn Header="报警时间" Width="150" Binding="{Binding dateTime}"/>
                                            <DataGridTextColumn Header="是否处理" Width="150" Binding="{Binding HasHandle}"/>
                                        </DataGrid.Columns>
                                    </DataGrid>

                                    <local:Pager TotalPage="{Binding TotalPage}" CurrentPage="{Binding CurrentPage, Mode=TwoWay}" HorizontalAlignment="Center" Grid.Row="1">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="FirstPage">
                                                <i:InvokeCommandAction Command="{Binding FirstPageCommand}"/>
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="PreviousPage">
                                                <i:InvokeCommandAction Command="{Binding PreviousPageCommand}"/>
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="NextPage">
                                                <i:InvokeCommandAction Command="{Binding NextPageCommand}" />
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="LastPage">
                                                <i:InvokeCommandAction Command="{Binding LastPageCommand}"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </local:Pager>
                                </Grid>

                            </Metro:MetroTabItem>-->
                            <Metro:MetroTabItem Header="历史报警数据" Icon="/Resources/tabIcon.png">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="80"/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                        <Label Content="起始时间："  VerticalContentAlignment="Center" FontSize="16" Margin="50,0,0,0"></Label>
                                        <DatePicker 
                                                    Name="AlarmDataStartPicker"
                                                    CalendarStyle="{StaticResource CalendarStyle1}" 
                                                    Width="300" 
                                                    FontSize="20" Height="40"
                                                    SelectedDateChanged="AlramDataTimeSelect" 
                                                    Style="{StaticResource MahApps.Styles.DatePicker}" 
                                                    mah:TextBoxHelper.WatermarkAlignment="Center" 
                                                    mah:TextBoxHelper.ClearTextButton="True"
                                                    mah:TextBoxHelper.ButtonWidth="40">
                                        </DatePicker>

                                        <Label Content="结束时间：" Margin="150,0,0,0" VerticalContentAlignment="Center" FontSize="16"></Label>
                                        <DatePicker 
                                                    Name="AlarmDataEndPicker"
                                                    CalendarStyle="{StaticResource CalendarStyle1}" 
                                                    Width="300" 
                                                    FontSize="20"
                                                    Height="40"
                                                    SelectedDateChanged="AlramDataTimeSelect" 
                                                    Style="{StaticResource MahApps.Styles.DatePicker}" 
                                                    mah:TextBoxHelper.WatermarkAlignment="Center" 
                                                    mah:TextBoxHelper.ClearTextButton="True"
                                                    mah:TextBoxHelper.ButtonWidth="40" mah:TextBoxHelper.AutoWatermark="True">
                                        </DatePicker>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>
                                        </Grid>

                                        <ListView Name="HisAlarmList" Grid.Row="0" 
                                                      ItemsSource="{Binding AlarmDataSource}" 
                                                      ItemContainerStyle="{StaticResource ListViewItemStyle}"
                                                      Style="{StaticResource MahApps.Styles.ListView}"  
                                                      VerticalAlignment="Center" 
                                                      DataContext="{Binding AlramPagerModels}" 
                                                      Height="450">
                                            <ListView.View >
                                                <GridView>
                                                    <GridView.ColumnHeaderContainerStyle>
                                                        <Style TargetType="GridViewColumnHeader">
                                                            <Setter Property="HorizontalContentAlignment"  Value="Center"/>
                                                            <Setter Property="FontWeight" Value="Black"/>
                                                            <Setter Property="Height" Value="40"/>
                                                        </Style>
                                                    </GridView.ColumnHeaderContainerStyle>

                                                    <GridViewColumn Header="序号" Width="50" DisplayMemberBinding="{Binding id}"/>
                                                    <GridViewColumn Header="设备类型" Width="150" DisplayMemberBinding="{Binding DeviceInfo, Converter={StaticResource AlarmDataConverter}}"/>
                                                    <GridViewColumn Header="报警码" Width="200" DisplayMemberBinding="{Binding ErrorCode}"/>
                                                    <GridViewColumn Header="报警信息" Width="200" DisplayMemberBinding="{Binding ErrorDes}"/>
                                                    <GridViewColumn Header="报警日期" Width="150" DisplayMemberBinding="{Binding CreateDate}"/>
                                                    <GridViewColumn Header="报警时间" Width="150" DisplayMemberBinding="{Binding CreateTime}"/>
                                                </GridView>
                                            </ListView.View>
                                        </ListView>

                                        <local:Pager TotalPage="{Binding TotalPage}" CurrentPage="{Binding CurrentPage, Mode=TwoWay}" HorizontalAlignment="Center" Grid.Row="1" Margin="0,10,0,0" DataContext="{Binding AlramPagerModels}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="FirstPage">
                                                    <i:InvokeCommandAction Command="{Binding FirstPageCommand}"/>
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="PreviousPage">
                                                    <i:InvokeCommandAction Command="{Binding PreviousPageCommand}"/>
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="NextPage">
                                                    <i:InvokeCommandAction Command="{Binding NextPageCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="LastPage">
                                                    <i:InvokeCommandAction Command="{Binding LastPageCommand}"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </local:Pager>
                                    </StackPanel>
                                </Grid>
                            </Metro:MetroTabItem>
                        </Metro:MetroTabControl>
                    </StackPanel>
                </Grid>
            </Metro:MetroMenuTabItem>
            <Metro:MetroMenuTabItem Name="SysSetingTab" Header="系统设置" Icon="/Resources/icon/toolbarSites.png" IconMove="/Resources/icon/toolbarSites.png" Height="50">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="100"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0">
                        <Metro:MetroImage Grid.Row="0"  Content="BiaotiImage"  HorizontalAlignment="Center"  VerticalAlignment="Top" Source="/Resources/biaoti.png"  />
                    </StackPanel>

                    <StackPanel Grid.Row="1">
                        <Metro:MetroTabControl x:Name="Systabc"  Foreground="#FF2F48B8" FontSize="14">
                            <Metro:MetroTabItem Header="参数设置" Icon="/Resources/tabIcon.png">
                                <Metro:MetroWaterfallFlow ListWidth="600">
                                    <Grid>
                                        <Metro:MetroGroupBox Header="参数配置" Margin="20,0,0,0">
                                            <StackPanel Orientation="Vertical">
                                                <GroupBox Style="{StaticResource MahApps.Styles.GroupBox}" Header="溶液体积和稀释倍数配置" >
                                                    <Grid>
                                                        <Grid.Resources>
                                                            <Style TargetType="Label">
                                                                <Setter Property="Foreground" Value="Red"/>
                                                            </Style>

                                                            <Style TargetType="Metro:MetroTextBox">
                                                                <EventSetter Event="GotFocus" Handler="TextBox_GotFocus">

                                                                </EventSetter>
                                                                <EventSetter Event="LostFocus" Handler="TextBox_LostFocus">

                                                                </EventSetter>
                                                            </Style>

                                                        </Grid.Resources>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                        </Grid.RowDefinitions>
                                                        <StackPanel Grid.Row="0" Orientation="Horizontal">

                                                            <Metro:MetroTextBox Name="StandVol" Title="标液溶液体积:" InputHint="请输入整数" Width="200" HorizontalAlignment="Left" FontWeight="Bold" Text="50">
                                                            </Metro:MetroTextBox>
                                                            <Label Content="(单位:ml)"></Label>
                                                            <Metro:MetroTextBox Name="StandDil" Title="标液稀释倍数:" InputHint="请输入整数" Width="200" HorizontalAlignment="Left" FontWeight="Bold" Margin="50,0,0,0" Text="250" IsEnabled="False" />
                                                        </StackPanel>
                                                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,20,0,0">
                                                            <Metro:MetroTextBox Name="SampVol" Title="样液溶液体积:" InputHint="请输入整数" Width="200" HorizontalAlignment="Left" FontWeight="Bold" Text="50"/>
                                                            <Label Content="(单位:ml)"></Label>
                                                            <Metro:MetroTextBox Name="SampDil" Title="COD稀释比例:" InputHint="请输入整数" Width="200" HorizontalAlignment="Left" FontWeight="Bold" Margin="50,0,0,0" Text="10" Visibility="Collapsed"/>

                                                        </StackPanel>
                                                        <StackPanel Grid.Row="2" Margin="0,20,0,0">
                                                            <Metro:MetroGroupBox Header="样液稀释模式">
                                                                <StackPanel Orientation="Horizontal">
                                                                    <RadioButton Style="{StaticResource BoxRadioButton}" Margin="10,1,1,1" Content="进水口模式"  Background="{DynamicResource MahApps.Brushes.Accent}" FontSize="20" Width="150" Height="40" Checked="WaterInModel_Checked"></RadioButton>
                                                                    <RadioButton x:Name="OutModel" Style="{StaticResource BoxRadioButton}" Margin="40,1,1,1" FontWeight="Bold" FontSize="20" Background="{DynamicResource MahApps.Brushes.Accent}" IsChecked="True" Width="150" Height="40" Content="出水口模式" Checked="WaterOutModel_Checked"></RadioButton>
                                                                </StackPanel>

                                                            </Metro:MetroGroupBox>
                                                        </StackPanel>

                                                    </Grid>
                                                </GroupBox>
                                                <GroupBox Header="流程参数配置" Style="{StaticResource MahApps.Styles.GroupBox}" Margin="0,20,0,0">
                                                    <Grid>
                                                        <Grid.Resources>
                                                            <Style TargetType="Label">
                                                                <Setter Property="Foreground" Value="Red"/>
                                                            </Style>
                                                            <Style TargetType="Metro:MetroTextBox">
                                                                <Setter Property="FontWeight" Value="ExtraBold"/>
                                                                <EventSetter Event="GotFocus" Handler="TextBox_GotFocus">

                                                                </EventSetter>
                                                                <EventSetter Event="LostFocus" Handler="TextBox_LostFocus">

                                                                </EventSetter>
                                                            </Style>

                                                        </Grid.Resources>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="250"/>
                                                            <ColumnDefinition Width="370"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid.RowDefinitions>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                        </Grid.RowDefinitions>

                                                        <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Margin="0,20,0,20">
                                                            <Metro:MetroTextBox Name="WarmUpTime"  Title="预热时间:" Width="150"  Text="60"/>
                                                            <Label Content="(单位：秒)"></Label>
                                                        </StackPanel>

                                                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,20,0,20">
                                                            <Metro:MetroTextBox  Name="PrecipitateTime" Title="沉淀时间:" Width="150"  Text="10"/>
                                                            <Label Content="(单位：秒)"></Label>
                                                        </StackPanel>

                                                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal">
                                                            <Metro:MetroTextBox Name="InietTime" Title="进水超时:" Width="150"  Text="120"/>
                                                            <Label Content="(单位：秒)"></Label>
                                                        </StackPanel>

                                                        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
                                                            <Metro:MetroTextBox Name="EmptyTime" Title="排空超时:" Width="150"  Text="300"/>
                                                            <Label Content="(单位：秒)"></Label>
                                                        </StackPanel>

                                                        <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Margin="0,20,0,0" >
                                                            <Metro:MetroTextBox  Title="清洗频率:" Width="150"  Text="1"/>
                                                            <Label Content="(次)"></Label>
                                                        </StackPanel>

                                                        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,20,0,0" >
                                                            <Metro:MetroTextBox Name="WashTimes"  Title="润洗次数:" Width="150"  Text="1" />
                                                            <Label Content="(次)" ></Label>
                                                        </StackPanel>

                                                        <StackPanel  Grid.Row="3" Grid.Column="0" Orientation="Horizontal" Margin="0,20,0,0" >
                                                            <Metro:MetroTextBox  Title="采样间隔:" Width="150"  x:Name="sampleSpac" Text="4"/>
                                                            <Label Content="(单位：时)" Foreground="Red"></Label>
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="1" Margin="0,20,0,0" >
                                                            <Metro:MetroTextBox  Name="SampleScale" Text="1" Title="采集比例" Width="150" InputHint="InputHint..."/>
                                                            <Label Content="(BOD与参数采集比)" FontSize="12" Foreground="Red"></Label>
                                                        </StackPanel>
                                                    </Grid>
                                                </GroupBox>

                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                                                    <Metro:MetroButton Content="配置" MinWidth="100" MinHeight="30" Width="100" Height="40" Click="SaveConfig_Click"/>
                                                    <Metro:MetroButton Content="读取" MinWidth="100" MinHeight="30" Width="100" Height="40" Margin="40,0,0,0" Click="ReadConfig_Click"/>
                                                    <Metro:MetroButton Content="恢复出厂设置" MetroButtonState="Red" MinWidth="120" MinHeight="30" Width="100" Height="40" Margin="40,0,0,0" Click="ResetConfig_Click"/>

                                                </StackPanel>
                                            </StackPanel>

                                        </Metro:MetroGroupBox>
                                    </Grid>
                                    <Grid >
                                        <Metro:MetroGroupBox Header="网口参数" Margin="20,0,0,0">
                                            <StackPanel HorizontalAlignment="Left" Orientation="Horizontal" >
                                                <Metro:MetroTextBox x:Name="IP_textbox" Text="192.168.16.174" Title="PLC IP" TitleMinWidth="30" InputHint="InputHint..."   Margin="0,10,0,0" HorizontalAlignment="Left" Width="Auto" Height="30" VerticalAlignment="Center"/>
                                                <Metro:MetroTextBox x:Name="Port_TextBox"  Text="9600" Title="Port" HorizontalAlignment="Right" Height="30" Width="Auto" InputHint="InputHint..."  VerticalAlignment="Center" Margin="0,10,0,0"  />
                                                <Metro:MetroButton MinHeight="20" MinWidth="80" MetroButtonState="Green" Content="连接" Command="{Binding CmdSampleWithParam}" CommandParameter="Good" IsEnabled="{Binding BtnEnabled}" VerticalAlignment="Center"   Width="25" Height="30" Margin="60,0,0,-10" Padding="8,6,8,6" ScrollViewer.CanContentScroll="True" FontSize="12" FontWeight="Bold" HorizontalAlignment="Right" Click="MetroButton_Click_1"/>
                                                <Metro:MetroButton MinHeight="20" MinWidth="80" MetroButtonState="Red" Content="重置" VerticalAlignment="Center"   Width="25" Height="30" Margin="20,0,0,-10" Padding="8,6,8,6"  FontSize="12" FontWeight="Bold"  Click="ResetIp_Click"/>

                                            </StackPanel>
                                        </Metro:MetroGroupBox>
                                    </Grid>

                                    <Grid>
                                        <Metro:MetroGroupBox  Header="系统配置" Margin="20,0,0,0">
                                            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Center">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto"/>
                                                        <ColumnDefinition Width="auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Grid.Column="0">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition Height="20"/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>

                                                            <StackPanel Orientation="Horizontal" Grid.Row="0" >
                                                                <RadioButton Style="{StaticResource BoxRadioButton}" Margin="10,1,1,1" Content="出厂模式"  Background="{DynamicResource MahApps.Brushes.Accent}" FontSize="20" Width="120" Height="40"></RadioButton>
                                                                <RadioButton x:Name="DebugModel" Style="{StaticResource BoxRadioButton}" Margin="20,1,1,1" FontWeight="Bold" FontSize="20" Background="{DynamicResource MahApps.Brushes.Accent}" IsChecked="True" Width="120" Height="40" Checked="RadioButton_Checked" Unchecked="RadioButton_Unchecked" Content="调试模式"></RadioButton>

                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal" Grid.Row="2">
                                                                <Metro:MetroTextBox Name="UpdataStatus" Text="30" Title="状态刷新周期" TitleMinWidth="30" InputHint="InputHint..."   Margin="0,10,0,0" HorizontalAlignment="Left" Width="Auto" Height="30" VerticalAlignment="Center"/>
                                                                <Label Content="(单位：分钟)" VerticalContentAlignment="Center"></Label>
                                                            </StackPanel>
                                                        </Grid>

                                                    </StackPanel>

                                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                        <!--<local:TimeEditer Hour="{Binding Hour,Mode=TwoWay}" Minute="{Binding Minute,Mode=TwoWay}" Second="{Binding Seccond,Mode=TwoWay}" Width="250" Height="100" HorizontalAlignment="Left" />
                                                        <TextBlock Margin="0 10 0 0" FontSize="18">
                                                            <Run Text="当前时间：" />
                                                            <Run Text="{Binding Hour}"/>
                                                            <Run Text="时"/>
                                                            <Run Text="{Binding Minute}"/>
                                                            <Run Text="分"/>
                                                            <Run Text="{Binding Seccond}"/>
                                                            <Run Text="秒"/>
                                                        </TextBlock>-->


                                                    </StackPanel>
                                                </Grid>


                                            </StackPanel>
                                        </Metro:MetroGroupBox>
                                    </Grid>
                                    <Grid >
                                        <Metro:MetroGroupBox Header="系统控制" Margin="20,0,0,0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Grid.Column="0">
                                                    <Label Name="RunStatuLab" Content="开始运行" FontWeight="Bold" FontSize="16"/>
                                                    <ToggleButton Width="80"
                                                            Height="80"
                                                            Margin="0, 10, 0, 0"
                                                            Name="start"
                                                            Style="{StaticResource MahApps.Styles.ToggleButton.Circle}"  HorizontalAlignment="Center" Click="start_Click" Checked="start_Checked" Unchecked="start_Unchecked">
                                                        <Image x:Name="BodRunImg" Source="/Resources/icon_player.png" />

                                                    </ToggleButton>
                                                </StackPanel>
                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Grid.Column="1">
                                                    <Label Content="停止运行" FontWeight="Bold" FontSize="16"/>
                                                    <Button Width="80"
                                                            Height="80"
                                                            Margin="0, 10, 0, 0"
                                                            Name="restart"
                                                            Style="{StaticResource MahApps.Styles.Button.Circle}"  HorizontalAlignment="Center" Click="restart_Click" mah:ControlsHelper.FocusBorderThickness="10,10,10,10" >
                                                        <Image Source="/Resources/tingzhi.png"  />

                                                    </Button>
                                                </StackPanel>
                                            </Grid>
                                        </Metro:MetroGroupBox>
                                    </Grid>
                                    <!--</Grid>-->
                                </Metro:MetroWaterfallFlow>
                            </Metro:MetroTabItem>
                            <Metro:MetroTabItem Header="系统维护" Icon="/Resources/tabIcon.png">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Orientation="Vertical">

                                        <Label Content="系统维护表单" HorizontalAlignment="Center" FontSize="22" FontWeight="Bold" Foreground="Red" Margin="0,20,0,0" Background="{x:Null}"/>
                                        <DataGrid  ItemsSource="{Binding FakeSource}" AutoGenerateColumns="False"  Name="dataGrid1"  VerticalAlignment="Top"
                  CanUserSortColumns="False"   Margin="5" IsReadOnly="True"
                  CanUserResizeColumns="False" CanUserResizeRows="False"  SelectionMode="Single"
                  CanUserReorderColumns="False" AlternationCount="2"  RowHeaderWidth="0" CanUserAddRows="False" Style="{DynamicResource MahApps.Styles.DataGrid.Azure}">

                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Item Id" Binding="{Binding Id}" Width="80"/>
                                                <DataGridTextColumn Header="Item Name" Binding="{Binding ItemName}" Width="180"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1" Margin="0,20,0,20" >
                                        <local:Pager TotalPage="{Binding TotalPage}" CurrentPage="{Binding CurrentPage, Mode=TwoWay}" HorizontalAlignment="Center" Grid.Row="1">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="FirstPage">
                                                    <i:InvokeCommandAction Command="{Binding FirstPageCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="PreviousPage">
                                                    <i:InvokeCommandAction Command="{Binding PreviousPageCommand}"/>
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="NextPage">
                                                    <i:InvokeCommandAction Command="{Binding NextPageCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="LastPage">
                                                    <i:InvokeCommandAction Command="{Binding LastPageCommand}"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </local:Pager>
                                    </StackPanel>
                                </Grid>
                            </Metro:MetroTabItem>
                            <Metro:MetroTabItem Header="密码设置" Icon="/Resources/tabIcon.png">

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                                        <Label Content="当前密码:" FontSize="20"/>
                                        <PasswordBox PasswordChar="*" Width="250" Style="{DynamicResource MahApps.Styles.PasswordBox.Button}" Height="40"/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                                        <Label Content="修改密码:" FontSize="20"/>
                                        <PasswordBox PasswordChar="*" Width="250" Style="{DynamicResource MahApps.Styles.PasswordBox.Button}" Height="40"/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                                        <Label Content="确认密码:" FontSize="20"/>
                                        <PasswordBox PasswordChar="*" Width="250" Style="{DynamicResource MahApps.Styles.PasswordBox.Button}" Height="40"/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="3" Orientation="Horizontal"  HorizontalAlignment="Center" Margin="0,40,0,0">
                                        <Metro:MetroButton  Content="保存" MetroButtonState="Red" HorizontalAlignment="Left" Width="120" Height="50"/>
                                        <Metro:MetroButton  Content="重置" MetroButtonState="None" HorizontalAlignment="Right" Margin="120,0,0,0" Width="120"/>
                                    </StackPanel>

                                </Grid>

                            </Metro:MetroTabItem>
                            <Metro:MetroTabItem Header="关于本机" Icon="/Resources/tabIcon.png">

                            </Metro:MetroTabItem>
                        </Metro:MetroTabControl>
                    </StackPanel>
                </Grid>

            </Metro:MetroMenuTabItem>
            <!--<Metro:MetroMenuTabItem Header="数据调试">
                <Grid>
                    <StackPanel>
                        <GroupBox Style="{StaticResource MahApps.Styles.GroupBox}">
                            <StackPanel>

                                <Metro:MetroTextBox Title=""/>

                                <Metro:MetroButton>
                                    
                                </Metro:MetroButton>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </Grid>
            </Metro:MetroMenuTabItem>-->
        </Metro:MetroMenuTabControl>
    </Grid>
</mah:MetroWindow>
